---
title: 直线相交判定：跨立试验和快速排斥试验
tags: 
  - 算法
---

## 引例

给出线段AB和CD的端点A, B, C, D的坐标，请判断线段AB和CD是否存在一个交点?  

## 跨立试验

因为我们的算法是面向计算机的，所以我们不能简单地说“把它画出来不就好了吗”这样的话，我们需要给出一个切实可行的算法，我们可以操作的数只有上述给出的四个点的总共八个坐标。  

由坐标判断线段的关系，我们可以非常自然地想到使用向量运算。我们又想到，若线段AB与CD相交，则点A和B一定分别在直线CD的两侧，而点C和D一定分别在直线AB的两侧。  

但又如何描述这个"两侧"呢？这个是简单的。  
如果A和B同在CD的一侧，$\vec{ CD }$ 与 $\vec{ CA }$的叉积 和 $\vec{ CD }$ 与 $\vec{ CB }$的叉积的方向一定相同；而若A和B不在CD的同一侧，$\vec{ CD }$ 与 $\vec{ CA }$的叉积 和 $\vec{ CD }$ 与 $\vec{ CB }$的叉积的方向一定相反。  

([什么？你说你不知道什么叫叉积？](https://baike.baidu.com/item/%E5%90%91%E9%87%8F%E7%A7%AF/4601007)){:target="_blank"}

二维向量的叉积的实现是简单的：若向量$\vec{ a }$是`(Xa, Ya, 0)`,  向量$\vec{ b }$是`(Xb, Yb, 0)`，则二者之叉积是`(0, 0, Xa * Yb - Xb * Ya)`

